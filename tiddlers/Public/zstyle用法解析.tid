created: 20250315075150261
description: ä»‹ç»äº†zstyleçš„ä½œç”¨è·Ÿå¸¸è§ç”¨æ³•
modified: 20250317090326806
modifier: uzvg
progress: Building
rating: Personal
tags: PermanentNotes zsh Shell
title: zstyleç”¨æ³•è§£æ
type: text/vnd.tiddlywiki
visibility: Public

!! ä½œç”¨ï¼š

`zstyle` æ˜¯ Zsh ä¸­ç”¨äºå®šä¹‰å’ŒæŸ¥è¯¢ ''æ ·å¼ï¼ˆStylesï¼‰'' çš„å†…ç½®å‘½ä»¤ã€‚æ ·å¼æ˜¯åç§°ä¸å€¼çš„ç»„åˆï¼Œå€¼ç”±å¤šä¸ªå­—ç¬¦ä¸²ç»„æˆã€‚å®ƒä»¬ä¸ ''æ¨¡å¼ï¼ˆPatternsï¼‰'' ä¸€èµ·å­˜å‚¨ï¼Œé€šè¿‡ ''ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰'' åŒ¹é…æ¨¡å¼æ¥æ£€ç´¢é…ç½®ï¼Œé€šè¿‡`man zshmodules`å‘½ä»¤æŸ¥çœ‹å…¶æ–‡æ¡£ã€‚

!! æ ¸å¿ƒæ¦‚å¿µï¼š

; æ ·å¼ï¼ˆStyleï¼‰ï¼š
* é”®å€¼å¯¹ï¼Œä¾‹å¦‚ `preferred-precipitation` æ˜¯é”®ï¼Œ`rain` æ˜¯å€¼ã€‚
; æ¨¡å¼ï¼ˆPatternï¼‰ï¼š
* é€šè¿‡å†’å·åˆ†éš”çš„å±‚çº§è·¯å¾„ï¼ˆå¦‚ `:weather:europe:*`ï¼‰ï¼Œç”¨äºåŒ¹é…ä¸Šä¸‹æ–‡ã€‚
; ä¸Šä¸‹æ–‡ï¼ˆContextï¼‰ï¼š
* åŠ¨æ€ç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼ˆå¦‚ `:weather:asia:Monday:full-moon`ï¼‰ï¼Œç”¨äºæŸ¥è¯¢åŒ¹é…çš„æ ·å¼ã€‚

!! è¯­æ³•ï¼š

```zsh
# å®šä¹‰æ ·å¼
zstyle [é€‰é¡¹] <æ¨¡å¼> <æ ·å¼å> <å€¼...>

# æŸ¥è¯¢æˆ–æ“ä½œæ ·å¼
zstyle [é€‰é¡¹] <ä¸Šä¸‹æ–‡> <æ ·å¼å> [å‚æ•°...]
```

!! é€‰é¡¹ä¸åŠŸèƒ½ï¼š

!!! 1. å®šä¹‰æ ·å¼ï¼š

```zsh
zstyle [ -e | - | -- ] <æ¨¡å¼> <æ ·å¼å> <å€¼...>
```

* `-e`ï¼šåŠ¨æ€ç”Ÿæˆå€¼ã€‚å€¼ä¼šè¢«æ‹¼æ¥å¹¶æ‰§è¡Œï¼ˆç±»ä¼¼ `eval`ï¼‰ï¼Œç»“æœéœ€èµ‹å€¼ç»™ `$reply`ã€‚

ç¤ºä¾‹ï¼š

```zsh
zstyle -e ':weather:*' temp '$(get_current_temp)'  # åŠ¨æ€è·å–æ¸©åº¦
```

!!! 2. åˆ—å‡ºæ ·å¼ï¼š

```zsh
zstyle [ -L [å…ƒæ¨¡å¼ [æ ·å¼å]] ]
```

* `-L`ï¼šä»¥ `zstyle` å‘½ä»¤å½¢å¼åˆ—å‡ºæ ·å¼ã€‚

ç¤ºä¾‹ï¼š

```zsh
zstyle -L ':completion:*'  # åˆ—å‡ºæ‰€æœ‰è¡¥å…¨ç›¸å…³çš„æ ·å¼
```

!!! 3. åˆ é™¤æ ·å¼ï¼š

```zsh
zstyle -d [æ¨¡å¼ [æ ·å¼å...]]
```

ç¤ºä¾‹ï¼š

```zsh
zstyle -d ':weather:*'  # åˆ é™¤æ‰€æœ‰å¤©æ°”ç›¸å…³æ ·å¼
```

!!! 4. è·å–æ ·å¼ï¼š

```zsh
zstyle -g <æ•°ç»„å> [æ¨¡å¼ [æ ·å¼å]]
```

* å°†åŒ¹é…çš„æ ·å¼å­˜å‚¨åˆ°æŒ‡å®šæ•°ç»„ä¸­ã€‚

ç¤ºä¾‹ï¼š

```zsh
zstyle -g my_styles ':prompt:*'  # è·å–æ‰€æœ‰æç¤ºç¬¦æ ·å¼
```

!! æŸ¥è¯¢ä¸æµ‹è¯•ï¼š

!!! 1. è·å–å­—ç¬¦ä¸²å€¼ï¼š

```zsh
zstyle -s <ä¸Šä¸‹æ–‡> <æ ·å¼å> <å˜é‡å> [åˆ†éš”ç¬¦]
```

* å°†æ ·å¼å€¼æ‹¼æ¥ä¸ºå­—ç¬¦ä¸²ï¼Œèµ‹å€¼ç»™å˜é‡ã€‚

ç¤ºä¾‹ï¼š

```zsh
zstyle -s ':weather:europe' temp REPLY  # å°†æ¸©åº¦å€¼å­˜å…¥ $REPLY
```

!!! 2. è·å–å¸ƒå°”å€¼ï¼š

```zsh
zstyle -b <ä¸Šä¸‹æ–‡> <æ ·å¼å> <å˜é‡å>
```

* è‹¥å€¼ä¸º `yes/true/on/1`ï¼Œå˜é‡è®¾ä¸º `yes`ï¼Œå¦åˆ™ä¸º `no`ã€‚

!!! 3. è·å–æ•°ç»„å€¼ï¼š

```zsh
zstyle -a <ä¸Šä¸‹æ–‡> <æ ·å¼å> <æ•°ç»„å>
```

* å°†æ ·å¼å€¼å­˜å‚¨ä¸ºæ•°ç»„ï¼Œæ”¯æŒå…³è”æ•°ç»„ã€‚

!!! 4. æµ‹è¯•æ ·å¼ï¼š

```zsh
zstyle -t <ä¸Šä¸‹æ–‡> <æ ·å¼å> [æµ‹è¯•å€¼...]
zstyle -T <ä¸Šä¸‹æ–‡> <æ ·å¼å> [æµ‹è¯•å€¼...]
```

* `-t`ï¼šæµ‹è¯•æ ·å¼æ˜¯å¦å­˜åœ¨ä¸”å€¼åŒ¹é…ã€‚
* `-T`ï¼šç±»ä¼¼ `-t`ï¼Œä½†æ ·å¼æœªå®šä¹‰æ—¶è¿”å› `0`ã€‚

!! ''åŒ¹é…è§„åˆ™''

; ä¼˜å…ˆçº§ï¼š
* æ¨¡å¼è¶Šå…·ä½“ï¼ˆå±‚çº§è¶Šå¤šæˆ–ç»„ä»¶æ›´æ˜ç¡®ï¼‰ï¼Œä¼˜å…ˆçº§è¶Šé«˜ã€‚

ç¤ºä¾‹ï¼š

```zsh
zstyle ':weather:europe:*' temp 20  # æ¬§æ´²æ¸©åº¦
zstyle ':weather:*:Sunday:*' temp 15 # å‘¨æ—¥æ¸©åº¦
```

* åœ¨å‘¨æ—¥çš„æ¬§æ´²ï¼Œ`temp` ä¼šåŒ¹é… `:weather:*:Sunday:*`ï¼ˆå±‚çº§æ›´æ·±ï¼‰ã€‚

; é€šé…ç¬¦ `*`ï¼š
* åŒ¹é…ä»»æ„å­—ç¬¦ï¼ˆä¸åŒ…æ‹¬å†’å·ï¼‰ï¼Œç”¨äºæ¨¡ç³ŠåŒ¹é…ã€‚

!! ç¤ºä¾‹ï¼š

!!! 1. å¤©æ°”æ’ä»¶é…ç½®ï¼š

```zsh
# å®šä¹‰æ ·å¼
zstyle ':weather:europe:*' preferred-precipitation rain
zstyle ':weather:*:Sunday:*' preferred-precipitation snow

# æŸ¥è¯¢æ ·å¼
zstyle -s ":weather:europe:Sunday:full-moon" preferred-precipitation REPLY
echo $REPLY  # è¾“å‡º snowï¼ˆåŒ¹é…æ›´å…·ä½“çš„å‘¨æ—¥æ¨¡å¼ï¼‰
```

!!! 2. è¡¥å…¨é…ç½®ï¼š

```zsh
# æ˜¾ç¤ºè¡¥å…¨è¯¦æƒ…
zstyle ':completion:*' verbose yes

# å¯ç”¨èœå•é€‰æ‹©
zstyle ':completion:*' menu select
```

!! ''è¿”å›å€¼''

* `0`ï¼šæ“ä½œæˆåŠŸï¼ˆå¦‚æ ·å¼å­˜åœ¨ä¸”åŒ¹é…ï¼‰ã€‚
* `1`ï¼šæ“ä½œå¤±è´¥ï¼ˆå¦‚æ ·å¼ä¸å­˜åœ¨æˆ–æµ‹è¯•ä¸é€šè¿‡ï¼‰ã€‚
* `2`ï¼šæ ·å¼æœªå®šä¹‰ï¼ˆä»… `-t` é€‰é¡¹è¿”å›ï¼‰ã€‚

é€šè¿‡ `zstyle`ï¼ŒZsh å®ç°äº†é«˜åº¦çµæ´»çš„é…ç½®ç®¡ç†ï¼Œé€‚ç”¨äºè¡¥å…¨ã€æç¤ºç¬¦ã€æ’ä»¶ç­‰åœºæ™¯ã€‚

!! æ‹“å±•ï¼š

* ğŸ‘‰ [[zstyle example|https://gist.github.com/mattmc3/449430b6654aaab0ba7160e8efe8291b]]